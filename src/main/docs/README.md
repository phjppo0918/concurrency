mysql 의 default 격리 수준은 repeatable read임. 즉, MVCC 지원.

즉, 영속성 컨텍스트 안쓰고 깡쿼리 찔러도 동시성 대응 가능

단, 도메인 로직과 상이해질 수 있음. 위 코드에서는 재고가 0 미만으로 변경될 수 있음.
즉 jpql 사용 시 도메인 레벨에서 값 검증 로직이 있다면 확인해봐야 함.